{"ast":null,"code":"import _toConsumableArray from \"D:\\\\Collap Projects\\\\ACLEDA-Student\\\\student-ui\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"D:\\\\Collap Projects\\\\ACLEDA-Student\\\\student-ui\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"D:\\\\Collap Projects\\\\ACLEDA-Student\\\\student-ui\\\\src\\\\app\\\\views\\\\applications\\\\messagePopUp\\\\UserPopUpMessage.jsx\";\nimport React, { useEffect, useState, useCallback, useRef } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { useStyles } from \"../../../c1utils/styles\";\nimport C1Alert from \"../../../c1component/C1Alert\";\nimport SockJS from \"sockjs-client\";\nimport C1InputField from \"../../../c1component/C1InputField\";\nvar UserPopUpMessage = function UserPopUpMessage() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    messages = _useState2[0],\n    setMessages = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    input = _useState4[0],\n    setInput = _useState4[1];\n  var ws = useRef(null);\n  useEffect(function () {\n    ws.current = new WebSocket(\"ws://localhost:8080/chat\");\n    ws.current.onmessage = function (event) {\n      setMessages(function (prev) {\n        return [].concat(_toConsumableArray(prev), [event.data]);\n      });\n    };\n    ws.current.onopen = function () {\n      console.log(\"Connected to WebSocket\");\n    };\n    ws.current.onclose = function () {\n      console.log(\"Disconnected\");\n    };\n    return function () {\n      ws.current.close();\n    };\n  }, []);\n  var sendMessage = function sendMessage() {\n    if (input.trim() !== \"\") {\n      ws.current.send(input);\n      setInput(\"\");\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: 20\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }\n  }, \"WebSocket Chat\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      border: \"1px solid gray\",\n      padding: 10,\n      height: 200,\n      overflowY: \"scroll\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }\n  }, messages.map(function (msg, i) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: i,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 43\n      }\n    }, msg);\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    value: input,\n    onChange: function onChange(e) {\n      return setInput(e.target.value);\n    },\n    onKeyDown: function onKeyDown(e) {\n      return e.key === \"Enter\" && sendMessage();\n    },\n    placeholder: \"Type message...\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: sendMessage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }, \"Send\"));\n};\nexport default UserPopUpMessage;","map":{"version":3,"names":["React","useEffect","useState","useCallback","useRef","useTranslation","Grid","useStyles","C1Alert","SockJS","C1InputField","UserPopUpMessage","messages","setMessages","input","setInput","ws","current","WebSocket","onmessage","event","prev","data","onopen","console","log","onclose","close","sendMessage","trim","send","padding","border","height","overflowY","map","msg","i","e","target","value","key"],"sources":["D:/Collap Projects/ACLEDA-Student/student-ui/src/app/views/applications/messagePopUp/UserPopUpMessage.jsx"],"sourcesContent":["import React, {useEffect, useState, useCallback, useRef} from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { Box, Button, Snackbar, Paper, Typography } from \"@material-ui/core\";\r\nimport { useStyles } from \"../../../c1utils/styles\";\r\nimport C1Alert from \"../../../c1component/C1Alert\";\r\nimport SockJS from \"sockjs-client\";\r\nimport C1InputField from \"../../../c1component/C1InputField\";\r\n\r\nconst UserPopUpMessage = () => {\r\n    const [messages, setMessages] = useState([]);\r\n    const [input, setInput] = useState(\"\");\r\n    const ws = useRef(null);\r\n\r\n    useEffect(() => {\r\n        ws.current = new WebSocket(\"ws://localhost:8080/chat\");\r\n\r\n        ws.current.onmessage = (event) => {\r\n            setMessages(prev => [...prev, event.data]);\r\n        };\r\n\r\n        ws.current.onopen = () => {\r\n            console.log(\"Connected to WebSocket\");\r\n        };\r\n\r\n        ws.current.onclose = () => {\r\n            console.log(\"Disconnected\");\r\n        };\r\n\r\n        return () => {\r\n            ws.current.close();\r\n        };\r\n    }, []);\r\n\r\n    const sendMessage = () => {\r\n        if (input.trim() !== \"\") {\r\n            ws.current.send(input);\r\n            setInput(\"\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{ padding: 20 }}>\r\n            <h2>WebSocket Chat</h2>\r\n            <div style={{ border: \"1px solid gray\", padding: 10, height: 200, overflowY: \"scroll\" }}>\r\n                {messages.map((msg, i) => <div key={i}>{msg}</div>)}\r\n            </div>\r\n            <input\r\n                value={input}\r\n                onChange={e => setInput(e.target.value)}\r\n                onKeyDown={e => e.key === \"Enter\" && sendMessage()}\r\n                placeholder=\"Type message...\"\r\n            />\r\n            <button onClick={sendMessage}>Send</button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UserPopUpMessage;\r\n"],"mappings":";;;;AAAA,OAAOA,KAAK,IAAGC,SAAS,EAAEC,QAAQ,EAAEC,WAAW,EAAEC,MAAM,QAAO,OAAO;AACrE,SAASC,cAAc,QAAQ,eAAe;AAC9C,OAAOC,IAAI,MAAM,wBAAwB;AAEzC,SAASC,SAAS,QAAQ,yBAAyB;AACnD,OAAOC,OAAO,MAAM,8BAA8B;AAClD,OAAOC,MAAM,MAAM,eAAe;AAClC,OAAOC,YAAY,MAAM,mCAAmC;AAE5D,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAgB,GAAS;EAC3B,gBAAgCT,QAAQ,CAAC,EAAE,CAAC;IAAA;IAArCU,QAAQ;IAAEC,WAAW;EAC5B,iBAA0BX,QAAQ,CAAC,EAAE,CAAC;IAAA;IAA/BY,KAAK;IAAEC,QAAQ;EACtB,IAAMC,EAAE,GAAGZ,MAAM,CAAC,IAAI,CAAC;EAEvBH,SAAS,CAAC,YAAM;IACZe,EAAE,CAACC,OAAO,GAAG,IAAIC,SAAS,CAAC,0BAA0B,CAAC;IAEtDF,EAAE,CAACC,OAAO,CAACE,SAAS,GAAG,UAACC,KAAK,EAAK;MAC9BP,WAAW,CAAC,UAAAQ,IAAI;QAAA,oCAAQA,IAAI,IAAED,KAAK,CAACE,IAAI;MAAA,CAAC,CAAC;IAC9C,CAAC;IAEDN,EAAE,CAACC,OAAO,CAACM,MAAM,GAAG,YAAM;MACtBC,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;IACzC,CAAC;IAEDT,EAAE,CAACC,OAAO,CAACS,OAAO,GAAG,YAAM;MACvBF,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;IAC/B,CAAC;IAED,OAAO,YAAM;MACTT,EAAE,CAACC,OAAO,CAACU,KAAK,EAAE;IACtB,CAAC;EACL,CAAC,EAAE,EAAE,CAAC;EAEN,IAAMC,WAAW,GAAG,SAAdA,WAAW,GAAS;IACtB,IAAId,KAAK,CAACe,IAAI,EAAE,KAAK,EAAE,EAAE;MACrBb,EAAE,CAACC,OAAO,CAACa,IAAI,CAAChB,KAAK,CAAC;MACtBC,QAAQ,CAAC,EAAE,CAAC;IAChB;EACJ,CAAC;EAED,oBACI;IAAK,KAAK,EAAE;MAAEgB,OAAO,EAAE;IAAG,CAAE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACxB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAAI,gBAAc,CAAK,eACvB;IAAK,KAAK,EAAE;MAAEC,MAAM,EAAE,gBAAgB;MAAED,OAAO,EAAE,EAAE;MAAEE,MAAM,EAAE,GAAG;MAAEC,SAAS,EAAE;IAAS,CAAE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACnFtB,QAAQ,CAACuB,GAAG,CAAC,UAACC,GAAG,EAAEC,CAAC;IAAA,oBAAK;MAAK,GAAG,EAAEA,CAAE;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GAAED,GAAG,CAAO;EAAA,EAAC,CACjD,eACN;IACI,KAAK,EAAEtB,KAAM;IACb,QAAQ,EAAE,kBAAAwB,CAAC;MAAA,OAAIvB,QAAQ,CAACuB,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC;IAAA,CAAC;IACxC,SAAS,EAAE,mBAAAF,CAAC;MAAA,OAAIA,CAAC,CAACG,GAAG,KAAK,OAAO,IAAIb,WAAW,EAAE;IAAA,CAAC;IACnD,WAAW,EAAC,iBAAiB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAC/B,eACF;IAAQ,OAAO,EAAEA,WAAY;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAAC,MAAI,CAAS,CACzC;AAEd,CAAC;AAED,eAAejB,gBAAgB"},"metadata":{},"sourceType":"module"}