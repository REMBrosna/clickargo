{"ast":null,"code":"import _slicedToArray from \"D:\\\\Collap Projects\\\\ACLEDA-Student\\\\student-ui\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"D:\\\\Collap Projects\\\\ACLEDA-Student\\\\student-ui\\\\src\\\\app\\\\views\\\\configuration\\\\customer\\\\CustomerList.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport useHttp from \"app/c1hooks/http\";\nimport C1DataTable from \"app/c1component/C1DataTable\";\nimport C1ListPanel from \"app/c1component/C1ListPanel\";\nimport C1DataTableActions from \"app/c1component/C1DataTableActions\";\nimport { getActiveMode, getDeActiveMode, getStatusDesc } from \"app/c1utils/statusUtils\";\nimport ConfirmationDialog from \"../../../../matx/components/ConfirmationDialog\";\nvar CustomerList = function CustomerList() {\n  var _useTranslation = useTranslation([\"masters\", \"common\"]),\n    t = _useTranslation.t;\n  var _useHttp = useHttp(),\n    isLoading = _useHttp.isLoading,\n    res = _useHttp.res,\n    error = _useHttp.error,\n    urlId = _useHttp.urlId,\n    sendRequest = _useHttp.sendRequest;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isRefresh = _useState2[0],\n    setRefresh = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    openPopupAction = _useState6[0],\n    setOpenPopupAction = _useState6[1];\n  var _useState7 = useState(\"\"),\n    _useState8 = _slicedToArray(_useState7, 2),\n    action = _useState8[0],\n    setAction = _useState8[1];\n  var _useState9 = useState(\"\"),\n    _useState10 = _slicedToArray(_useState9, 2),\n    id = _useState10[0],\n    setId = _useState10[1];\n  useEffect(function () {\n    if (!isLoading && !error && res) {\n      if (urlId === 'getForActive') {\n        sendRequest(\"api/v1/library/mst/entity/customer/\" + res.data.data.cusId + \"/activate\", \"activate\", \"PUT\", res.data.data);\n      }\n      if (urlId === 'activate' || urlId === 'deActive') {\n        setRefresh(true);\n        setLoading(false);\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isLoading, res, error, urlId]);\n  var columns = [{\n    name: \"cusId\",\n    label: \"ID\"\n  }, {\n    name: \"customerName\",\n    label: \"Customer Name\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"customerType\",\n    label: \"Type\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"gender\",\n    label: \"Gender\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"dob\",\n    label: \"Date Of Birth\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"phoneNumber\",\n    label: \"Phone NUmber\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"identityCardNo\",\n    label: \"Identity CardNo\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"recStatus\",\n    label: \"Status\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"action\",\n    label: \" \",\n    options: {\n      filter: false,\n      display: true,\n      viewColumns: false,\n      customBodyRender: function customBodyRender(value, tableMeta, updateValue) {\n        return /*#__PURE__*/React.createElement(C1DataTableActions, {\n          editPath: getDeActiveMode(tableMeta.rowData[7]) ? \"/master/customer/edit/\" + tableMeta.rowData[0] : null,\n          viewPath: \"/master/customer/view/\" + tableMeta.rowData[0],\n          deActiveEventHandler: getDeActiveMode(tableMeta.rowData[7]) ? function () {\n            return handleDeActiveHandler(tableMeta.rowData[0]);\n          } : null,\n          activeEventHandler: getActiveMode(tableMeta.rowData[7]) ? function () {\n            return handleActiveHandler(tableMeta.rowData[0]);\n          } : null,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 25\n          }\n        });\n      }\n    }\n  }];\n  var handleDeActiveHandler = function handleDeActiveHandler(id) {\n    setOpenPopupAction(true);\n    setAction(\"delete\");\n    setId(id);\n  };\n  var handleActiveHandler = function handleActiveHandler(id) {\n    setOpenPopupAction(true);\n    setAction(\"active\");\n    setId(id);\n  };\n  var handleConfirmAction = function handleConfirmAction() {\n    setLoading(true);\n    setRefresh(false);\n    if (action === \"delete\") {\n      sendRequest(\"api/v1/library/mst/entity/customer/\" + id, \"deActive\", \"delete\", {});\n    } else if (action === \"active\") {\n      sendRequest(\"api/v1/library/mst/entity/customer/\" + id, \"getForActive\", \"get\", {});\n    }\n    setOpenPopupAction(false);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(C1ListPanel, {\n    routeSegments: [{\n      name: t(\"List User\")\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(C1DataTable, {\n    url: 'api/v1/library/mst/entity/customer',\n    columns: columns,\n    title: \"Customer\",\n    defaultOrder: \"cusId\",\n    isServer: false,\n    isRefresh: isRefresh,\n    showAdd: {\n      path: \"/master/customer/new\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(ConfirmationDialog, {\n    open: openPopupAction,\n    onConfirmDialogClose: function onConfirmDialogClose() {\n      return setOpenPopupAction(false);\n    },\n    text: t(\"common:confirmMsgs.confirm.content\"),\n    title: t(\"common:confirmMsgs.confirm.title\"),\n    onYesClick: function onYesClick(e) {\n      return handleConfirmAction(e);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }\n  }));\n};\nexport default CustomerList;","map":{"version":3,"names":["React","useState","useEffect","useTranslation","useHttp","C1DataTable","C1ListPanel","C1DataTableActions","getActiveMode","getDeActiveMode","getStatusDesc","ConfirmationDialog","CustomerList","t","isLoading","res","error","urlId","sendRequest","isRefresh","setRefresh","loading","setLoading","openPopupAction","setOpenPopupAction","action","setAction","id","setId","data","cusId","columns","name","label","options","filter","display","viewColumns","customBodyRender","value","tableMeta","updateValue","rowData","handleDeActiveHandler","handleActiveHandler","handleConfirmAction","path","e"],"sources":["D:/Collap Projects/ACLEDA-Student/student-ui/src/app/views/configuration/customer/CustomerList.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport useHttp from \"app/c1hooks/http\";\r\nimport C1DataTable from \"app/c1component/C1DataTable\";\r\nimport C1ListPanel from \"app/c1component/C1ListPanel\";\r\nimport C1DataTableActions from \"app/c1component/C1DataTableActions\";\r\nimport {getActiveMode, getDeActiveMode, getStatusDesc} from \"app/c1utils/statusUtils\";\r\nimport ConfirmationDialog from \"../../../../matx/components/ConfirmationDialog\";\r\n\r\nconst CustomerList = () => {\r\n    const { t } = useTranslation([\"masters\", \"common\"]);\r\n    const { isLoading, res, error, urlId, sendRequest } = useHttp();\r\n    const [isRefresh, setRefresh] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    const [openPopupAction, setOpenPopupAction] = useState(false);\r\n    const[action, setAction] = useState(\"\");\r\n    const [id, setId] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        if (!isLoading && !error && res) {\r\n            if (urlId==='getForActive'){\r\n                sendRequest(\"api/v1/library/mst/entity/customer/\"+ res.data.data.cusId +\"/activate\", \"activate\", \"PUT\", res.data.data);\r\n            }\r\n            if (urlId==='activate' || urlId==='deActive'){\r\n                setRefresh(true);\r\n                setLoading(false);\r\n            }\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [isLoading, res, error, urlId]);\r\n\r\n    const columns = [\r\n        {\r\n            name: \"cusId\",\r\n            label: \"ID\",\r\n        },\r\n        {\r\n            name: \"customerName\",\r\n            label: \"Customer Name\",\r\n            options: {\r\n                filter: true,\r\n            },\r\n        },\r\n        {\r\n            name: \"customerType\",\r\n            label: \"Type\",\r\n            options: {\r\n                filter: true,\r\n            },\r\n        },\r\n        {\r\n            name: \"gender\",\r\n            label: \"Gender\",\r\n            options: {\r\n                filter: true,\r\n            },\r\n        },\r\n        {\r\n            name: \"dob\",\r\n            label: \"Date Of Birth\",\r\n            options: {\r\n                filter: true,\r\n            },\r\n        },\r\n        {\r\n            name: \"phoneNumber\",\r\n            label: \"Phone NUmber\",\r\n            options: {\r\n                filter: true,\r\n            },\r\n        },\r\n        {\r\n            name: \"identityCardNo\",\r\n            label: \"Identity CardNo\",\r\n            options: {\r\n                filter: true,\r\n            },\r\n        },\r\n        {\r\n            name: \"recStatus\",\r\n            label: \"Status\",\r\n            options: {\r\n                filter: true,\r\n            },\r\n        },\r\n        {\r\n            name: \"action\",\r\n            label: \" \",\r\n            options: {\r\n                filter: false,\r\n                display: true,\r\n                viewColumns: false,\r\n                customBodyRender: (value, tableMeta, updateValue) => {\r\n                    return (\r\n                        <C1DataTableActions\r\n                            editPath={getDeActiveMode(tableMeta.rowData[7]) ? \"/master/customer/edit/\" + tableMeta.rowData[0]: null}\r\n                            viewPath={\"/master/customer/view/\" + tableMeta.rowData[0]}\r\n                            deActiveEventHandler={getDeActiveMode(tableMeta.rowData[7]) ? () => handleDeActiveHandler(tableMeta.rowData[0]): null}\r\n                            activeEventHandler={getActiveMode(tableMeta.rowData[7]) ? () => handleActiveHandler(tableMeta.rowData[0]): null}\r\n                        />\r\n                    );\r\n                },\r\n            },\r\n        },\r\n    ];\r\n\r\n    const handleDeActiveHandler = (id) => {\r\n        setOpenPopupAction(true);\r\n        setAction(\"delete\")\r\n        setId(id);\r\n    }\r\n\r\n    const handleActiveHandler = (id) => {\r\n        setOpenPopupAction(true);\r\n        setAction(\"active\")\r\n        setId(id);\r\n    }\r\n\r\n    const handleConfirmAction = () => {\r\n        setLoading(true);\r\n        setRefresh(false);\r\n\r\n        if(action === \"delete\") {\r\n            sendRequest(\"api/v1/library/mst/entity/customer/\"+ id, \"deActive\", \"delete\", {});\r\n        }else if(action === \"active\") {\r\n            sendRequest(\"api/v1/library/mst/entity/customer/\" + id, \"getForActive\", \"get\", {})\r\n        }\r\n        setOpenPopupAction(false);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <C1ListPanel routeSegments={[{ name: t(\"List User\") }]}>\r\n                <C1DataTable\r\n                    url={'api/v1/library/mst/entity/customer'}\r\n                    columns={columns}\r\n                    title={\"Customer\"}\r\n                    defaultOrder=\"cusId\"\r\n                    isServer={false}\r\n                    isRefresh={isRefresh}\r\n                    showAdd={{\r\n                        path: \"/master/customer/new\",\r\n                    }}\r\n                />\r\n            </C1ListPanel>\r\n\r\n            <ConfirmationDialog open={openPopupAction}\r\n                                onConfirmDialogClose={() => setOpenPopupAction(false)}\r\n                                text={t(\"common:confirmMsgs.confirm.content\")}\r\n                                title={t(\"common:confirmMsgs.confirm.title\")}\r\n                                onYesClick={(e) => handleConfirmAction(e)} />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CustomerList;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}