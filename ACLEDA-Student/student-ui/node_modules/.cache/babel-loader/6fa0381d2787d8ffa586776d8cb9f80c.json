{"ast":null,"code":"import _Snackbar from \"@material-ui/core/esm/Snackbar\";\nimport _Button from \"@material-ui/core/esm/Button\";\nimport _Box from \"@material-ui/core/esm/Box\";\nimport _toConsumableArray from \"D:\\\\Collap Projects\\\\ACLEDA-Student\\\\student-ui\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"D:\\\\Collap Projects\\\\ACLEDA-Student\\\\student-ui\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"D:\\\\Collap Projects\\\\ACLEDA-Student\\\\student-ui\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"D:\\\\Collap Projects\\\\ACLEDA-Student\\\\student-ui\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"D:\\\\Collap Projects\\\\ACLEDA-Student\\\\student-ui\\\\src\\\\app\\\\views\\\\applications\\\\messagePopUp\\\\UserPopUpMessage.jsx\";\nimport React, { useEffect, useRef, useState, useCallback } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { useStyles } from \"../../../c1utils/styles\";\nimport C1TextArea from \"../../../c1component/C1TextArea\";\nimport C1Alert from \"../../../c1component/C1Alert\";\nimport { getValue } from \"../../../c1utils/utility\";\nimport useAuth from \"../../../hooks/useAuth\";\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\nimport SwapHorizIcon from '@material-ui/icons/SwapHoriz';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport useHttp from \"../../../c1hooks/http\";\nvar UserPopUpMessage = function UserPopUpMessage(_ref) {\n  var _auth$user2, _messageInput$message2;\n  var receiver = _ref.receiver,\n    handleOnClose = _ref.handleOnClose;\n  console.log(\"receiver\", receiver);\n  var auth = useAuth();\n  console.log(\"auth\", auth);\n  var classes = useStyles();\n  var _useTranslation = useTranslation([\"job\"]),\n    t = _useTranslation.t;\n  var _useHttp = useHttp(),\n    isLoading = _useHttp.isLoading,\n    isFormSubmission = _useHttp.isFormSubmission,\n    res = _useHttp.res,\n    validation = _useHttp.validation,\n    error = _useHttp.error,\n    urlId = _useHttp.urlId,\n    sendRequest = _useHttp.sendRequest;\n  var socketRef = useRef(null);\n  var _useState = useState({\n      message: \"\",\n      receiver: receiver,\n      // assume this is passed as a prop or defined somewhere\n      type: \"CHAT\"\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    messageInput = _useState2[0],\n    setMessageInput = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    messages = _useState4[0],\n    setMessages = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    socketConnected = _useState6[0],\n    setSocketConnected = _useState6[1];\n  var _useState7 = useState({\n      open: false,\n      vertical: \"top\",\n      horizontal: \"center\",\n      msg: \"\",\n      severity: \"success\"\n    }),\n    _useState8 = _slicedToArray(_useState7, 2),\n    snackBarState = _useState8[0],\n    setSnackBarState = _useState8[1];\n  console.log(\"messages\", messageInput);\n  useEffect(function () {\n    var _auth$user;\n    sendRequest(\"/\".concat(auth === null || auth === void 0 ? void 0 : (_auth$user = auth.user) === null || _auth$user === void 0 ? void 0 : _auth$user.id, \"/\").concat(receiver), 'FETCH', 'GET', null);\n    // eslint-disable-next-line\n  }, [receiver, auth === null || auth === void 0 ? void 0 : (_auth$user2 = auth.user) === null || _auth$user2 === void 0 ? void 0 : _auth$user2.id]);\n  useEffect(function () {\n    setSnackBarOptions(defaultSnackbarValue);\n    if (!isLoading && !error && res && !validation) {\n      setLoading(false);\n      switch (urlId) {\n        case \"doFetch\":\n          {\n            var _res$data;\n            setInputData((_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.data);\n            setData(res.data);\n            break;\n          }\n        case \"doNew\":\n          {\n            setInputData(res.data.data);\n            setData(res.data.data);\n            break;\n          }\n        case \"doCreate\":\n          {\n            setInputData(res.data);\n            setSnackBarOptions(_objectSpread(_objectSpread({}, snackBarOptions), {}, {\n              success: true,\n              successMsg: \"Application Student has been created.\",\n              redirectPath: \"/student/applicationStudent/list\"\n            }));\n            break;\n          }\n        case \"doUpdate\":\n          {\n            setInputData(res.data);\n            if (res.data) {\n              setSnackBarOptions(_objectSpread(_objectSpread({}, snackBarOptions), {}, {\n                success: true,\n                successMsg: \"Application Student has been save!\",\n                redirectPath: \"/student/applicationStudent/list/\"\n              }));\n            }\n            break;\n          }\n        case \"create\":\n          {\n            var _res$data2, _res$data2$data;\n            setPopupData(res.data);\n            setRefresh(true);\n            setSnackBarState(_objectSpread(_objectSpread({}, snackBarState), {}, {\n              open: true,\n              success: true,\n              successMsg: \"Return book\"\n            }));\n            console.log(\"inputData\", inputData);\n            setSubmitSuccess(true);\n            setInputData(_objectSpread(_objectSpread({}, inputData), {}, {\n              borTotalQty: (res === null || res === void 0 ? void 0 : (_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : (_res$data2$data = _res$data2.data) === null || _res$data2$data === void 0 ? void 0 : _res$data2$data.itmQty) + inputData.borTotalQty\n            }));\n            break;\n          }\n        case \"submit\":\n          {\n            setLoading(false);\n            setSnackBarOptions(_objectSpread(_objectSpread({}, snackBarOptions), {}, {\n              success: true,\n              successMsg: \"student has been submitted!\",\n              redirectPath: \"/student/applicationStudent/list/\"\n            }));\n            break;\n          }\n        default:\n          break;\n      }\n      setRefresh(true);\n      setOpenDeletePopupAction(false);\n    }\n    if (validation) {\n      setErrors(validation);\n      setLoading(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isLoading, isFormSubmission, validation, error]);\n  var handleCloseSnackBar = function handleCloseSnackBar() {\n    setSnackBarState(function (prev) {\n      return _objectSpread(_objectSpread({}, prev), {}, {\n        open: false\n      });\n    });\n  };\n\n  // Simplified deepUpdateState function\n  var deepUpdateState = function deepUpdateState(state, path, value) {\n    var _path$split = path.split('.'),\n      _path$split2 = _slicedToArray(_path$split, 1),\n      key = _path$split2[0];\n    return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, key, value));\n  };\n  var handleInputChange = function handleInputChange(e) {\n    console.log(\"eee\", e);\n    var _e$target = e.target,\n      name = _e$target.name,\n      value = _e$target.value;\n    console.log(\"before:\", messageInput);\n    setMessageInput(function (prev) {\n      var newState = _objectSpread(_objectSpread({}, prev), {}, _defineProperty({}, name, value));\n      console.log(\"after:\", newState);\n      return newState;\n    });\n  };\n  console.log(\"inputMessage\", messageInput);\n  // WebSocket connection management (same as before)\n  useEffect(function () {\n    var socket = new WebSocket('ws://localhost:8080/ws');\n    socketRef.current = socket;\n    var handleOpen = function handleOpen() {\n      console.log('WebSocket connected');\n      setSocketConnected(true);\n    };\n    var handleError = function handleError(error) {\n      console.error(\"WebSocket error\", error);\n      setSocketConnected(false);\n      setSnackBarState({\n        open: true,\n        msg: \"Connection error. Trying to reconnect...\",\n        severity: \"error\",\n        vertical: \"top\",\n        horizontal: \"center\"\n      });\n    };\n    var handleClose = function handleClose() {\n      console.log(\"WebSocket closed\");\n      setSocketConnected(false);\n    };\n    var handleMessage = function handleMessage(event) {\n      try {\n        var response = JSON.parse(event.data);\n        console.log(\"Received message:\", response);\n        setMessages(function (prev) {\n          return [].concat(_toConsumableArray(prev), [response]);\n        });\n      } catch (error) {\n        console.error(\"Error parsing message:\", error);\n      }\n    };\n    socket.addEventListener('open', handleOpen);\n    socket.addEventListener('error', handleError);\n    socket.addEventListener('close', handleClose);\n    socket.addEventListener('message', handleMessage);\n    return function () {\n      socket.removeEventListener('open', handleOpen);\n      socket.removeEventListener('error', handleError);\n      socket.removeEventListener('close', handleClose);\n      socket.removeEventListener('message', handleMessage);\n      if (socket.readyState === WebSocket.OPEN) {\n        socket.close();\n      }\n    };\n  }, []);\n  var handleSendMessage = useCallback(function () {\n    var _messageInput$message, _auth$user3;\n    if (!((_messageInput$message = messageInput.message) === null || _messageInput$message === void 0 ? void 0 : _messageInput$message.trim())) {\n      setSnackBarState({\n        open: true,\n        msg: \"Message cannot be empty\",\n        severity: \"warning\",\n        vertical: \"top\",\n        horizontal: \"center\"\n      });\n      return;\n    }\n    if (!socketConnected) {\n      setSnackBarState({\n        open: true,\n        msg: \"Not connected to server\",\n        severity: \"error\",\n        vertical: \"top\",\n        horizontal: \"center\"\n      });\n      return;\n    }\n    var payload = {\n      type: \"MESSAGE\",\n      content: messageInput.message,\n      sender: auth === null || auth === void 0 ? void 0 : (_auth$user3 = auth.user) === null || _auth$user3 === void 0 ? void 0 : _auth$user3.id,\n      receiver: receiver,\n      timestamp: new Date().toISOString()\n    };\n    try {\n      socketRef.current.send(JSON.stringify(payload));\n\n      // Optimistically add the message to local state\n      setMessages(function (prev) {\n        return [].concat(_toConsumableArray(prev), [_objectSpread(_objectSpread({}, payload), {}, {\n          status: 'sending'\n        })]);\n      });\n      setMessageInput({\n        message: \"\"\n      });\n      setSnackBarState({\n        open: true,\n        msg: \"Message sent!\",\n        severity: \"success\",\n        vertical: \"top\",\n        horizontal: \"center\"\n      });\n    } catch (error) {\n      console.error(\"Error sending message:\", error);\n      setSnackBarState({\n        open: true,\n        msg: \"Failed to send message\",\n        severity: \"error\",\n        vertical: \"top\",\n        horizontal: \"center\"\n      });\n    }\n  }, [messageInput, socketConnected]);\n  var handleKeyPress = function handleKeyPress(e) {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    className: classes.gridContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(_Box, {\n    style: {\n      height: '200px',\n      overflowY: 'auto',\n      border: '1px solid #ccc',\n      padding: '10px',\n      marginBottom: '10px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 21\n    }\n  }, messages.map(function (msg, index) {\n    var _auth$user4;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      style: {\n        marginBottom: '8px',\n        padding: '5px',\n        backgroundColor: msg.status === 'sending' ? '#f5f5f5' : 'transparent',\n        display: 'flex',\n        alignItems: 'center'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 29\n      }\n    }, msg.sender === (auth === null || auth === void 0 ? void 0 : (_auth$user4 = auth.user) === null || _auth$user4 === void 0 ? void 0 : _auth$user4.id) ? /*#__PURE__*/React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(AccountCircleIcon, {\n      style: {\n        marginRight: 8,\n        color: '#3f51b5'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        fontWeight: 'bold'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 41\n      }\n    }, \"You\"), /*#__PURE__*/React.createElement(ArrowForwardIcon, {\n      style: {\n        margin: '0 8px',\n        color: '#666'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(AccountCircleIcon, {\n      style: {\n        marginRight: 8,\n        color: '#f50057'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        fontWeight: 'bold'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 41\n      }\n    }, \"Them\")) : /*#__PURE__*/React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(AccountCircleIcon, {\n      style: {\n        marginRight: 8,\n        color: '#f50057'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        fontWeight: 'bold'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 41\n      }\n    }, \"Them\"), /*#__PURE__*/React.createElement(SwapHorizIcon, {\n      style: {\n        margin: '0 8px',\n        color: '#666'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(AccountCircleIcon, {\n      style: {\n        marginRight: 8,\n        color: '#3f51b5'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        fontWeight: 'bold'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 41\n      }\n    }, \"You\")), /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        marginLeft: '16px'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 37\n      }\n    }, new Date(msg.timestamp).toLocaleTimeString(), \":\"), \" \", msg.content), msg.status === 'sending' && /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        color: '#666',\n        marginLeft: '5px'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 37\n      }\n    }, \"(Sending...)\"));\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(C1TextArea, {\n    label: t(\"job:Enter your message\"),\n    name: \"message\",\n    value: getValue(messageInput === null || messageInput === void 0 ? void 0 : messageInput.message),\n    onChange: handleInputChange\n    // onKeyPress={handleKeyPress}\n    ,\n    multiline: true,\n    textLimit: 1024,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    style: {\n      display: \"flex\",\n      justifyContent: \"flex-end\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(_Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: handleSendMessage,\n    disabled: !socketConnected || !((_messageInput$message2 = messageInput.message) === null || _messageInput$message2 === void 0 ? void 0 : _messageInput$message2.trim()),\n    style: {\n      marginRight: \"20px\",\n      color: \"#fff\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 21\n    }\n  }, t(\"job:Send\")), /*#__PURE__*/React.createElement(_Button, {\n    variant: \"outlined\",\n    color: \"secondary\",\n    onClick: handleOnClose,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 21\n    }\n  }, t(\"job:Close\")))), /*#__PURE__*/React.createElement(_Snackbar, {\n    anchorOrigin: {\n      vertical: snackBarState.vertical,\n      horizontal: snackBarState.horizontal\n    },\n    open: snackBarState.open,\n    autoHideDuration: 3000,\n    onClose: handleCloseSnackBar,\n    key: snackBarState.vertical + snackBarState.horizontal,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(C1Alert, {\n    onClose: handleCloseSnackBar,\n    severity: snackBarState.severity,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 17\n    }\n  }, snackBarState.msg)));\n};\nexport default UserPopUpMessage;","map":{"version":3,"names":["React","useEffect","useRef","useState","useCallback","useTranslation","Grid","useStyles","C1TextArea","C1Alert","getValue","useAuth","ArrowForwardIcon","SwapHorizIcon","AccountCircleIcon","useHttp","UserPopUpMessage","receiver","handleOnClose","console","log","auth","classes","t","isLoading","isFormSubmission","res","validation","error","urlId","sendRequest","socketRef","message","type","messageInput","setMessageInput","messages","setMessages","socketConnected","setSocketConnected","open","vertical","horizontal","msg","severity","snackBarState","setSnackBarState","user","id","setSnackBarOptions","defaultSnackbarValue","setLoading","setInputData","data","setData","snackBarOptions","success","successMsg","redirectPath","setPopupData","setRefresh","inputData","setSubmitSuccess","borTotalQty","itmQty","setOpenDeletePopupAction","setErrors","handleCloseSnackBar","prev","deepUpdateState","state","path","value","split","key","handleInputChange","e","target","name","newState","socket","WebSocket","current","handleOpen","handleError","handleClose","handleMessage","event","response","JSON","parse","addEventListener","removeEventListener","readyState","OPEN","close","handleSendMessage","trim","payload","content","sender","timestamp","Date","toISOString","send","stringify","status","handleKeyPress","shiftKey","preventDefault","gridContainer","height","overflowY","border","padding","marginBottom","map","index","backgroundColor","display","alignItems","marginRight","color","fontWeight","margin","marginLeft","toLocaleTimeString","justifyContent"],"sources":["D:/Collap Projects/ACLEDA-Student/student-ui/src/app/views/applications/messagePopUp/UserPopUpMessage.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState, useCallback } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { Box, Button, Snackbar } from \"@material-ui/core\";\r\nimport { useStyles } from \"../../../c1utils/styles\";\r\nimport C1TextArea from \"../../../c1component/C1TextArea\";\r\nimport C1Alert from \"../../../c1component/C1Alert\";\r\nimport { getValue } from \"../../../c1utils/utility\"\r\nimport useAuth from \"../../../hooks/useAuth\";\r\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\r\nimport SwapHorizIcon from '@material-ui/icons/SwapHoriz';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport useHttp from \"../../../c1hooks/http\";\r\n\r\nconst UserPopUpMessage = ({ receiver,\r\n                              handleOnClose\r\n                          }) => {\r\n    console.log(\"receiver\", receiver)\r\n    const auth = useAuth();\r\n    console.log(\"auth\", auth)\r\n    const classes = useStyles();\r\n    const { t } = useTranslation([\"job\"]);\r\n    const { isLoading, isFormSubmission, res, validation, error, urlId, sendRequest } = useHttp();\r\n    const socketRef = useRef(null);\r\n    const [messageInput, setMessageInput] = useState({\r\n        message: \"\",\r\n        receiver: receiver, // assume this is passed as a prop or defined somewhere\r\n        type: \"CHAT\"\r\n    });\r\n    const [messages, setMessages] = useState([]);\r\n    const [socketConnected, setSocketConnected] = useState(false);\r\n\r\n    const [snackBarState, setSnackBarState] = useState({\r\n        open: false,\r\n        vertical: \"top\",\r\n        horizontal: \"center\",\r\n        msg: \"\",\r\n        severity: \"success\",\r\n    });\r\n    console.log(\"messages\", messageInput)\r\n\r\n    useEffect(() => {\r\n        sendRequest(`/${auth?.user?.id}/${receiver}`, 'FETCH', 'GET', null);\r\n        // eslint-disable-next-line\r\n    }, [receiver, auth?.user?.id]);\r\n\r\n    useEffect(() => {\r\n        setSnackBarOptions(defaultSnackbarValue);\r\n        if (!isLoading && !error && res && !validation) {\r\n            setLoading(false);\r\n            switch (urlId) {\r\n                case \"doFetch\":{\r\n                    setInputData(res.data?.data);\r\n                    setData(res.data)\r\n                    break;\r\n                }\r\n                case \"doNew\": {\r\n                    setInputData(res.data.data);\r\n                    setData(res.data.data)\r\n                    break;\r\n                }\r\n                case \"doCreate\": {\r\n                    setInputData(res.data);\r\n                    setSnackBarOptions({\r\n                        ...snackBarOptions,\r\n                        success: true,\r\n                        successMsg: `Application Student has been created.`,\r\n                        redirectPath: `/student/applicationStudent/list`\r\n                    });\r\n                    break;\r\n                }\r\n                case \"doUpdate\": {\r\n                    setInputData(res.data);\r\n                    if (res.data) {\r\n                        setSnackBarOptions({\r\n                            ...snackBarOptions,\r\n                            success: true,\r\n                            successMsg: `Application Student has been save!`,\r\n                            redirectPath: `/student/applicationStudent/list/`\r\n                        })\r\n                    }\r\n                    break;\r\n                }\r\n                case \"create\": {\r\n                    setPopupData(res.data);\r\n                    setRefresh(true);\r\n                    setSnackBarState({\r\n                        ...snackBarState,\r\n                        open: true,\r\n                        success: true,\r\n                        successMsg: \"Return book\"\r\n                    });\r\n                    console.log(\"inputData\",inputData)\r\n                    setSubmitSuccess(true);\r\n                    setInputData({\r\n                        ...inputData,\r\n                        borTotalQty : res?.data?.data?.itmQty + inputData.borTotalQty\r\n                    })\r\n                    break;\r\n                }\r\n                case \"submit\" : {\r\n                    setLoading(false);\r\n                    setSnackBarOptions({\r\n                        ...snackBarOptions,\r\n                        success: true,\r\n                        successMsg: \"student has been submitted!\",\r\n                        redirectPath: \"/student/applicationStudent/list/\"\r\n                    });\r\n                    break;\r\n                }\r\n                default: break;\r\n            }\r\n            setRefresh(true);\r\n            setOpenDeletePopupAction(false);\r\n        }\r\n        if (validation) {\r\n            setErrors(validation);\r\n            setLoading(false);\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [isLoading, isFormSubmission, validation, error]);\r\n    const handleCloseSnackBar = () => {\r\n        setSnackBarState(prev => ({ ...prev, open: false }));\r\n    };\r\n\r\n    // Simplified deepUpdateState function\r\n    const deepUpdateState = (state, path, value) => {\r\n        const [key] = path.split('.');\r\n        return {\r\n            ...state,\r\n            [key]: value\r\n        };\r\n    };\r\n\r\n    const handleInputChange = (e) => {\r\n        console.log(\"eee\", e)\r\n        const { name, value } = e.target;\r\n        console.log(\"before:\", messageInput);\r\n        setMessageInput((prev) => {\r\n            const newState = {\r\n                ...prev,\r\n                [name]: value,\r\n            };\r\n            console.log(\"after:\", newState);\r\n            return newState;\r\n        });\r\n    };\r\n\r\n    console.log(\"inputMessage\", messageInput)\r\n    // WebSocket connection management (same as before)\r\n    useEffect(() => {\r\n        const socket = new WebSocket('ws://localhost:8080/ws');\r\n        socketRef.current = socket;\r\n\r\n        const handleOpen = () => {\r\n            console.log('WebSocket connected');\r\n            setSocketConnected(true);\r\n        };\r\n\r\n        const handleError = (error) => {\r\n            console.error(\"WebSocket error\", error);\r\n            setSocketConnected(false);\r\n            setSnackBarState({\r\n                open: true,\r\n                msg: \"Connection error. Trying to reconnect...\",\r\n                severity: \"error\",\r\n                vertical: \"top\",\r\n                horizontal: \"center\",\r\n            });\r\n        };\r\n\r\n        const handleClose = () => {\r\n            console.log(\"WebSocket closed\");\r\n            setSocketConnected(false);\r\n        };\r\n\r\n        const handleMessage = (event) => {\r\n            try {\r\n                const response = JSON.parse(event.data);\r\n                console.log(\"Received message:\", response);\r\n                setMessages(prev => [...prev, response]);\r\n            } catch (error) {\r\n                console.error(\"Error parsing message:\", error);\r\n            }\r\n        };\r\n\r\n        socket.addEventListener('open', handleOpen);\r\n        socket.addEventListener('error', handleError);\r\n        socket.addEventListener('close', handleClose);\r\n        socket.addEventListener('message', handleMessage);\r\n\r\n        return () => {\r\n            socket.removeEventListener('open', handleOpen);\r\n            socket.removeEventListener('error', handleError);\r\n            socket.removeEventListener('close', handleClose);\r\n            socket.removeEventListener('message', handleMessage);\r\n\r\n            if (socket.readyState === WebSocket.OPEN) {\r\n                socket.close();\r\n            }\r\n        };\r\n    }, []);\r\n\r\n    const handleSendMessage = useCallback(() => {\r\n        if (!messageInput.message?.trim()) {\r\n            setSnackBarState({\r\n                open: true,\r\n                msg: \"Message cannot be empty\",\r\n                severity: \"warning\",\r\n                vertical: \"top\",\r\n                horizontal: \"center\",\r\n            });\r\n            return;\r\n        }\r\n\r\n        if (!socketConnected) {\r\n            setSnackBarState({\r\n                open: true,\r\n                msg: \"Not connected to server\",\r\n                severity: \"error\",\r\n                vertical: \"top\",\r\n                horizontal: \"center\",\r\n            });\r\n            return;\r\n        }\r\n\r\n        const payload = {\r\n            type: \"MESSAGE\",\r\n            content: messageInput.message,\r\n            sender: auth?.user?.id,\r\n            receiver: receiver,\r\n            timestamp: new Date().toISOString(),\r\n        };\r\n\r\n        try {\r\n            socketRef.current.send(JSON.stringify(payload));\r\n\r\n            // Optimistically add the message to local state\r\n            setMessages(prev => [...prev, { ...payload, status: 'sending' }]);\r\n            setMessageInput({ message: \"\" });\r\n\r\n            setSnackBarState({\r\n                open: true,\r\n                msg: \"Message sent!\",\r\n                severity: \"success\",\r\n                vertical: \"top\",\r\n                horizontal: \"center\",\r\n            });\r\n        } catch (error) {\r\n            console.error(\"Error sending message:\", error);\r\n            setSnackBarState({\r\n                open: true,\r\n                msg: \"Failed to send message\",\r\n                severity: \"error\",\r\n                vertical: \"top\",\r\n                horizontal: \"center\",\r\n            });\r\n        }\r\n    }, [messageInput, socketConnected]);\r\n\r\n    const handleKeyPress = (e) => {\r\n        if (e.key === \"Enter\" && !e.shiftKey) {\r\n            e.preventDefault();\r\n            handleSendMessage();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Grid container spacing={2} className={classes.gridContainer}>\r\n                {/* Message display area */}\r\n                <Grid item xs={12}>\r\n                    <Box style={{\r\n                        height: '200px',\r\n                        overflowY: 'auto',\r\n                        border: '1px solid #ccc',\r\n                        padding: '10px',\r\n                        marginBottom: '10px'\r\n                    }}>\r\n                        {messages.map((msg, index) => (\r\n                            <div key={index} style={{\r\n                                marginBottom: '8px',\r\n                                padding: '5px',\r\n                                backgroundColor: msg.status === 'sending' ? '#f5f5f5' : 'transparent',\r\n                                display: 'flex',\r\n                                alignItems: 'center'\r\n                            }}>\r\n                                {msg.sender === auth?.user?.id ? (\r\n                                    <>\r\n                                        <AccountCircleIcon style={{ marginRight: 8, color: '#3f51b5' }} />\r\n                                        <span style={{ fontWeight: 'bold' }}>You</span>\r\n                                        <ArrowForwardIcon style={{ margin: '0 8px', color: '#666' }} />\r\n                                        <AccountCircleIcon style={{ marginRight: 8, color: '#f50057' }} />\r\n                                        <span style={{ fontWeight: 'bold' }}>Them</span>\r\n                                    </>\r\n                                ) : (\r\n                                    <>\r\n                                        <AccountCircleIcon style={{ marginRight: 8, color: '#f50057' }} />\r\n                                        <span style={{ fontWeight: 'bold' }}>Them</span>\r\n                                        <SwapHorizIcon style={{ margin: '0 8px', color: '#666' }} />\r\n                                        <AccountCircleIcon style={{ marginRight: 8, color: '#3f51b5' }} />\r\n                                        <span style={{ fontWeight: 'bold' }}>You</span>\r\n                                    </>\r\n                                )}\r\n                                <span style={{ marginLeft: '16px' }}>\r\n                                    <strong>{new Date(msg.timestamp).toLocaleTimeString()}:</strong> {msg.content}\r\n                                </span>\r\n                                {msg.status === 'sending' &&\r\n                                    <span style={{ color: '#666', marginLeft: '5px' }}>(Sending...)</span>}\r\n                            </div>\r\n                        ))}\r\n                    </Box>\r\n                </Grid>\r\n\r\n                {/* Message input */}\r\n                <Grid item xs={12}>\r\n                    <C1TextArea\r\n                        label={t(\"job:Enter your message\")}\r\n                        name=\"message\"\r\n                        value={getValue(messageInput?.message)}\r\n                        onChange={handleInputChange}\r\n                        // onKeyPress={handleKeyPress}\r\n                        multiline\r\n                        textLimit={1024}\r\n                    />\r\n                </Grid>\r\n\r\n                <Grid item xs={12} style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        onClick={handleSendMessage}\r\n                        disabled={!socketConnected || !messageInput.message?.trim()}\r\n                        style={{ marginRight: \"20px\", color: \"#fff\" }}\r\n                    >\r\n                        {t(\"job:Send\")}\r\n                    </Button>\r\n\r\n                    <Button\r\n                        variant=\"outlined\"\r\n                        color=\"secondary\"\r\n                        onClick={handleOnClose}\r\n                    >\r\n                        {t(\"job:Close\")}\r\n                    </Button>\r\n                </Grid>\r\n            </Grid>\r\n\r\n            <Snackbar\r\n                anchorOrigin={{\r\n                    vertical: snackBarState.vertical,\r\n                    horizontal: snackBarState.horizontal,\r\n                }}\r\n                open={snackBarState.open}\r\n                autoHideDuration={3000}\r\n                onClose={handleCloseSnackBar}\r\n                key={snackBarState.vertical + snackBarState.horizontal}\r\n            >\r\n                <C1Alert onClose={handleCloseSnackBar} severity={snackBarState.severity}>\r\n                    {snackBarState.msg}\r\n                </C1Alert>\r\n            </Snackbar>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default UserPopUpMessage;"],"mappings":"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"},"metadata":{},"sourceType":"module"}