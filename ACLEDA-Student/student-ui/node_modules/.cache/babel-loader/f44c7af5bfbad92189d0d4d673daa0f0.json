{"ast":null,"code":"import { navigations } from \"../../navigations\";\nimport useAuth from \"../../hooks/useAuth\";\nexport var SET_USER_NAVIGATION = \"SET_USER_NAVIGATION\";\nvar getfilteredNavigations = function getfilteredNavigations() {\n  var navList = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var role = arguments.length > 1 ? arguments[1] : undefined;\n  console.log(\"role\", role);\n  return navList.reduce(function (array, nav) {\n    if (nav.auth) {\n      if (nav.auth.includes(role)) {\n        array.push(nav);\n      }\n    } else {\n      if (nav.children) {\n        nav.children = getfilteredNavigations(nav.children, role);\n        array.push(nav);\n      } else {\n        array.push(nav);\n      }\n    }\n    return array;\n  }, []);\n};\nexport function getNavigationByUser(auth) {\n  var _useAuth = useAuth(),\n    user = _useAuth.user;\n  return function (dispatch, getState) {\n    var _user$roles, _user$roles$;\n    var _getState = getState(),\n      _getState$navigations = _getState.navigations,\n      navigations = _getState$navigations === void 0 ? [] : _getState$navigations;\n    var role = user === null || user === void 0 ? void 0 : (_user$roles = user.roles) === null || _user$roles === void 0 ? void 0 : (_user$roles$ = _user$roles[0]) === null || _user$roles$ === void 0 ? void 0 : _user$roles$.name;\n    console.log(\"auth\", auth);\n    console.log(\"role\", role);\n    console.log(\"useAuth\", user);\n    var filteredNavigations = getfilteredNavigations(navigations, role);\n    dispatch({\n      type: SET_USER_NAVIGATION,\n      // payload: navigations\n      payload: filteredNavigations\n    });\n  };\n}\n\n/**Retrieves the menu from backend. */\nexport function getMenuByUser(user) {\n  return function (dispatch, getState) {\n    dispatch({\n      type: SET_USER_NAVIGATION,\n      payload: navigations\n      // payload: navigations\n    });\n  };\n}","map":{"version":3,"names":["navigations","useAuth","SET_USER_NAVIGATION","getfilteredNavigations","navList","role","console","log","reduce","array","nav","auth","includes","push","children","getNavigationByUser","user","dispatch","getState","roles","name","filteredNavigations","type","payload","getMenuByUser"],"sources":["D:/Collap Projects/ACLEDA-Student/student-ui/src/app/redux/actions/NavigationAction.js"],"sourcesContent":["import { navigations } from \"../../navigations\";\r\nimport useAuth from \"../../hooks/useAuth\";\r\n\r\nexport const SET_USER_NAVIGATION = \"SET_USER_NAVIGATION\";\r\n\r\n\r\nconst getfilteredNavigations = (navList = [], role) => {\r\n  console.log(\"role\", role)\r\n  return navList.reduce((array, nav) => {\r\n    if (nav.auth) {\r\n      if (nav.auth.includes(role)) {\r\n        array.push(nav);\r\n      }\r\n    } else {\r\n      if (nav.children) {\r\n        nav.children = getfilteredNavigations(nav.children, role);\r\n        array.push(nav);\r\n      } else {\r\n        array.push(nav);\r\n      }\r\n    }\r\n    return array;\r\n  }, []);\r\n};\r\n\r\nexport function getNavigationByUser(auth) {\r\n  const { user } = useAuth();\r\n  return (dispatch, getState) => {\r\n    let { navigations = [] } = getState();\r\n    const role = user?.roles?.[0]?.name;\r\n    console.log(\"auth\", auth)\r\n    console.log(\"role\", role)\r\n    console.log(\"useAuth\", user)\r\n    let filteredNavigations = getfilteredNavigations(navigations, role);\r\n\r\n    dispatch({\r\n      type: SET_USER_NAVIGATION,\r\n      // payload: navigations\r\n      payload: filteredNavigations\r\n    });\r\n  };\r\n}\r\n\r\n/**Retrieves the menu from backend. */\r\nexport function getMenuByUser(user) {\r\n  return (dispatch, getState) => {\r\n    dispatch({\r\n      type: SET_USER_NAVIGATION,\r\n      payload: navigations\r\n      // payload: navigations\r\n    });\r\n\r\n  };\r\n}\r\n\r\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,mBAAmB;AAC/C,OAAOC,OAAO,MAAM,qBAAqB;AAEzC,OAAO,IAAMC,mBAAmB,GAAG,qBAAqB;AAGxD,IAAMC,sBAAsB,GAAG,SAAzBA,sBAAsB,GAA2B;EAAA,IAAvBC,OAAO,uEAAG,EAAE;EAAA,IAAEC,IAAI;EAChDC,OAAO,CAACC,GAAG,CAAC,MAAM,EAAEF,IAAI,CAAC;EACzB,OAAOD,OAAO,CAACI,MAAM,CAAC,UAACC,KAAK,EAAEC,GAAG,EAAK;IACpC,IAAIA,GAAG,CAACC,IAAI,EAAE;MACZ,IAAID,GAAG,CAACC,IAAI,CAACC,QAAQ,CAACP,IAAI,CAAC,EAAE;QAC3BI,KAAK,CAACI,IAAI,CAACH,GAAG,CAAC;MACjB;IACF,CAAC,MAAM;MACL,IAAIA,GAAG,CAACI,QAAQ,EAAE;QAChBJ,GAAG,CAACI,QAAQ,GAAGX,sBAAsB,CAACO,GAAG,CAACI,QAAQ,EAAET,IAAI,CAAC;QACzDI,KAAK,CAACI,IAAI,CAACH,GAAG,CAAC;MACjB,CAAC,MAAM;QACLD,KAAK,CAACI,IAAI,CAACH,GAAG,CAAC;MACjB;IACF;IACA,OAAOD,KAAK;EACd,CAAC,EAAE,EAAE,CAAC;AACR,CAAC;AAED,OAAO,SAASM,mBAAmB,CAACJ,IAAI,EAAE;EACxC,eAAiBV,OAAO,EAAE;IAAlBe,IAAI,YAAJA,IAAI;EACZ,OAAO,UAACC,QAAQ,EAAEC,QAAQ,EAAK;IAAA;IAC7B,gBAA2BA,QAAQ,EAAE;MAAA,kCAA/BlB,WAAW;MAAXA,WAAW,sCAAG,EAAE;IACtB,IAAMK,IAAI,GAAGW,IAAI,aAAJA,IAAI,sCAAJA,IAAI,CAAEG,KAAK,gEAAX,YAAc,CAAC,CAAC,iDAAhB,aAAkBC,IAAI;IACnCd,OAAO,CAACC,GAAG,CAAC,MAAM,EAAEI,IAAI,CAAC;IACzBL,OAAO,CAACC,GAAG,CAAC,MAAM,EAAEF,IAAI,CAAC;IACzBC,OAAO,CAACC,GAAG,CAAC,SAAS,EAAES,IAAI,CAAC;IAC5B,IAAIK,mBAAmB,GAAGlB,sBAAsB,CAACH,WAAW,EAAEK,IAAI,CAAC;IAEnEY,QAAQ,CAAC;MACPK,IAAI,EAAEpB,mBAAmB;MACzB;MACAqB,OAAO,EAAEF;IACX,CAAC,CAAC;EACJ,CAAC;AACH;;AAEA;AACA,OAAO,SAASG,aAAa,CAACR,IAAI,EAAE;EAClC,OAAO,UAACC,QAAQ,EAAEC,QAAQ,EAAK;IAC7BD,QAAQ,CAAC;MACPK,IAAI,EAAEpB,mBAAmB;MACzBqB,OAAO,EAAEvB;MACT;IACF,CAAC,CAAC;EAEJ,CAAC;AACH"},"metadata":{},"sourceType":"module"}