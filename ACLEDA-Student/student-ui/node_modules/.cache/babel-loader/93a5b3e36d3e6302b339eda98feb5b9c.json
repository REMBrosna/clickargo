{"ast":null,"code":"import _Typography from \"@material-ui/core/esm/Typography\";\nimport _classCallCheck from \"D:\\\\Collap Projects\\\\ACLEDA-Student\\\\student-ui\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Collap Projects\\\\ACLEDA-Student\\\\student-ui\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"D:\\\\Collap Projects\\\\ACLEDA-Student\\\\student-ui\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"D:\\\\Collap Projects\\\\ACLEDA-Student\\\\student-ui\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"D:\\\\Collap Projects\\\\ACLEDA-Student\\\\student-ui\\\\src\\\\app\\\\hoc\\\\withErrorHandler\\\\withErrorHandler.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from \"react-router-dom\";\nimport Modal from '@material-ui/core/Modal';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport Grid from '@material-ui/core/Grid';\nimport Fade from '@material-ui/core/Fade';\nimport AuxDiv from \"../AuxDiv/AuxDiv\";\nimport classes from \"./withErrorHandler.module.css\";\nimport axios, { sessionTimeout, noPermission } from \"axios.js\";\nimport C1InputField from 'app/c1component/C1InputField';\nimport C1TextArea from 'app/c1component/C1TextArea';\nvar withErrorHandler = function withErrorHandler(WrappedComponent) {\n  return /*#__PURE__*/function (_Component) {\n    _inherits(_class2, _Component);\n    var _super = _createSuper(_class2);\n    function _class2(props) {\n      var _this;\n      _classCallCheck(this, _class2);\n      _this = _super.call(this, props);\n      _this.state = {\n        error: null,\n        open: false\n      };\n      _this.handleOpen = function () {\n        _this.setState({\n          open: true\n        });\n      };\n      _this.handleClose = function () {\n        _this.setState({\n          open: false\n        });\n      };\n      _this.errorConfirmedHandler = function () {\n        _this.setState({\n          error: null\n        });\n      };\n      _this.reqInterceptor = axios.interceptors.request.use(function (req) {\n        //this is to not close the modal if some fields (e.g. select) rerenders and request http\n        if (!_this.state.error) {\n          _this.setState({\n            error: null,\n            open: false\n          });\n        }\n        return req;\n      });\n      _this.resInterceptor = axios.interceptors.response.use(function (res) {\n        return res;\n      }, function (error) {\n        if (error.status !== 'VALIDATION_FAILED' && (error === null || error === void 0 ? void 0 : error.code) !== 406) {\n          _this.setState({\n            error: error,\n            open: true\n          });\n        } else if (error.status === 'VALIDATION_FAILED') {\n          return Promise.reject(error);\n        } else {\n          //Nina removed displaying of stacktrace for security purposes\n          return Promise.reject(error);\n        }\n      });\n      return _this;\n    }\n\n    //This will remove the interceptors, cleaning up so that if we reuse this in other parts in the application\n    //it will not create more interceptors\n    _createClass(_class2, [{\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        axios.interceptors.request.eject(this.reqInterceptor);\n        axios.interceptors.response.eject(this.resInterceptor);\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        if (this.state.error && this.state.error.err && sessionTimeout === this.state.error.err.msg) {\n          return /*#__PURE__*/React.createElement(Redirect, {\n            to: \"/session/timeout\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 24\n            }\n          });\n        }\n        if (this.state.error && this.state.error.err && noPermission === this.state.error.err.msg) {\n          return /*#__PURE__*/React.createElement(Redirect, {\n            to: \"/session/nopermission\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 24\n            }\n          });\n        }\n        return /*#__PURE__*/React.createElement(AuxDiv, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(Modal, {\n          \"aria-labelledby\": \"transition-modal-title\",\n          \"aria-describedby\": \"transition-modal-description\",\n          open: this.state.open,\n          onClose: this.handleClose,\n          BackdropComponent: Backdrop,\n          BackdropProps: {\n            timeout: 500\n          },\n          centered: \"true\",\n          style: {\n            position: 'absolute',\n            top: '30%',\n            margin: 'auto',\n            width: 600\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(Fade, {\n          in: this.state.open,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: classes.ModalPaper,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(\"h2\", {\n          id: \"transition-modal-title\",\n          style: {\n            backgroundColor: '#FF0000',\n            color: '#fff',\n            padding: '4px'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 33\n          }\n        }, \"Error\"), /*#__PURE__*/React.createElement(Grid, {\n          item: true,\n          lg: 12,\n          md: 12,\n          xs: 12,\n          style: {\n            padding: '6px'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(Grid, {\n          container: true,\n          alignItems: \"center\",\n          className: classes.gridContainer,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 37\n          }\n        }, /*#__PURE__*/React.createElement(Grid, {\n          item: true,\n          xs: 12,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 41\n          }\n        }, /*#__PURE__*/React.createElement(C1InputField, {\n          label: \"Code\",\n          disabled: true,\n          value: this.state.error && this.state.error.err ? this.state.error.err.code : '-1',\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 45\n          }\n        })), /*#__PURE__*/React.createElement(Grid, {\n          item: true,\n          xs: 12,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 41\n          }\n        }, /*#__PURE__*/React.createElement(C1TextArea, {\n          label: \"Description\",\n          disabled: true,\n          value: this.state.error && this.state.error.err ? this.state.error.err.msg : 'Something went wrong!',\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 45\n          }\n        })))), /*#__PURE__*/React.createElement(_Typography, {\n          variant: \"body2\",\n          style: {\n            padding: '6px'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 33\n          }\n        }, \"Please try again and contact PortEDI support if problem persist.\")))), /*#__PURE__*/React.createElement(WrappedComponent, Object.assign({}, this.props, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 21\n          }\n        })));\n      }\n    }]);\n    return _class2;\n  }(Component);\n};\nexport default withErrorHandler;","map":{"version":3,"names":["React","Component","Redirect","Modal","Backdrop","Grid","Fade","AuxDiv","classes","axios","sessionTimeout","noPermission","C1InputField","C1TextArea","withErrorHandler","WrappedComponent","props","state","error","open","handleOpen","setState","handleClose","errorConfirmedHandler","reqInterceptor","interceptors","request","use","req","resInterceptor","response","res","status","code","Promise","reject","eject","err","msg","timeout","position","top","margin","width","ModalPaper","backgroundColor","color","padding","gridContainer"],"sources":["D:/Collap Projects/ACLEDA-Student/student-ui/src/app/hoc/withErrorHandler/withErrorHandler.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nimport Modal from '@material-ui/core/Modal';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Fade from '@material-ui/core/Fade';\r\nimport AuxDiv from \"../AuxDiv/AuxDiv\";\r\nimport classes from \"./withErrorHandler.module.css\";\r\nimport axios, { sessionTimeout, noPermission } from \"axios.js\";\r\nimport C1InputField from 'app/c1component/C1InputField';\r\nimport C1TextArea from 'app/c1component/C1TextArea';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nconst withErrorHandler = (WrappedComponent) => {\r\n\r\n\r\n    return class extends Component {\r\n\r\n        state = {\r\n            error: null,\r\n            open: false\r\n        }\r\n\r\n        handleOpen = () => {\r\n            this.setState({ open: true });\r\n        }\r\n\r\n        handleClose = () => {\r\n            this.setState({ open: false });\r\n        }\r\n\r\n        constructor(props) {\r\n            super(props);\r\n            this.reqInterceptor = axios.interceptors.request.use(req => {\r\n                //this is to not close the modal if some fields (e.g. select) rerenders and request http\r\n                if (!this.state.error) {\r\n                    this.setState({ error: null, open: false });\r\n                }\r\n\r\n                return req;\r\n            });\r\n            this.resInterceptor = axios.interceptors.response.use(res => res, error => {\r\n                if (error.status !== 'VALIDATION_FAILED' && error?.code !== 406) {\r\n                    this.setState({ error: error, open: true });\r\n                } else if (error.status === 'VALIDATION_FAILED') {\r\n                    return Promise.reject(error);\r\n                } else {\r\n                    //Nina removed displaying of stacktrace for security purposes\r\n                    return Promise.reject(error);\r\n                }\r\n\r\n            });\r\n        }\r\n\r\n        //This will remove the interceptors, cleaning up so that if we reuse this in other parts in the application\r\n        //it will not create more interceptors\r\n        componentWillUnmount() {\r\n            axios.interceptors.request.eject(this.reqInterceptor);\r\n            axios.interceptors.response.eject(this.resInterceptor);\r\n        }\r\n\r\n        errorConfirmedHandler = () => {\r\n            this.setState({ error: null });\r\n        }\r\n\r\n\r\n\r\n        render() {\r\n            if (this.state.error && this.state.error.err && sessionTimeout === this.state.error.err.msg) {\r\n                return <Redirect to='/session/timeout' />;\r\n            }\r\n            if (this.state.error && this.state.error.err && noPermission === this.state.error.err.msg) {\r\n                return <Redirect to='/session/nopermission' />;\r\n            }\r\n            return (\r\n                <AuxDiv>\r\n                    <Modal\r\n                        aria-labelledby=\"transition-modal-title\"\r\n                        aria-describedby=\"transition-modal-description\"\r\n                        open={this.state.open}\r\n                        onClose={this.handleClose}\r\n                        BackdropComponent={Backdrop}\r\n                        BackdropProps={{\r\n                            timeout: 500,\r\n                        }}\r\n                        centered=\"true\"\r\n                        style={{\r\n                            position: 'absolute',\r\n                            top: '30%',\r\n                            margin: 'auto',\r\n                            width: 600,\r\n                        }}  >\r\n                        <Fade in={this.state.open}>\r\n                            <div className={classes.ModalPaper}>\r\n                                <h2 id=\"transition-modal-title\" style={{ backgroundColor: '#FF0000', color: '#fff', padding: '4px' }}>Error</h2>\r\n                                <Grid item lg={12} md={12} xs={12} style={{ padding: '6px' }}>\r\n                                    <Grid container alignItems=\"center\" className={classes.gridContainer}>\r\n                                        <Grid item xs={12} >\r\n                                            <C1InputField label=\"Code\" disabled\r\n                                                value={this.state.error && this.state.error.err ? this.state.error.err.code : '-1'} />\r\n                                        </Grid>\r\n                                        <Grid item xs={12} >\r\n                                            <C1TextArea label=\"Description\" disabled\r\n                                                value={this.state.error && this.state.error.err ? this.state.error.err.msg : 'Something went wrong!'} />\r\n                                        </Grid>\r\n                                    </Grid>\r\n\r\n                                </Grid>\r\n                                <Typography variant=\"body2\" style={{ padding: '6px' }}>Please try again and contact PortEDI support if problem persist.</Typography>\r\n                            </div>\r\n                        </Fade>\r\n                    </Modal>\r\n                    <WrappedComponent {...this.props} />\r\n                </AuxDiv>\r\n\r\n            );\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport default withErrorHandler;"],"mappings":"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"},"metadata":{},"sourceType":"module"}