{"ast":null,"code":"import _objectSpread from \"D:\\\\Collap Projects\\\\ACLEDA-Student\\\\student-ui\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"D:\\\\Collap Projects\\\\ACLEDA-Student\\\\student-ui\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"D:\\\\Collap Projects\\\\ACLEDA-Student\\\\student-ui\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"D:\\\\Collap Projects\\\\ACLEDA-Student\\\\student-ui\\\\src\\\\app\\\\views\\\\applications\\\\messagePopUp\\\\UserPopUpMessage.jsx\";\nimport React, { useEffect, useState, useCallback, useRef } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { useStyles } from \"../../../c1utils/styles\";\nimport C1Alert from \"../../../c1component/C1Alert\";\nimport SockJS from \"sockjs-client\";\nimport C1InputField from \"../../../c1component/C1InputField\";\nimport useHttp from \"../../../c1hooks/http\";\nvar UserPopUpMessage = function UserPopUpMessage() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    messages = _useState2[0],\n    setMessages = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    input = _useState4[0],\n    setInput = _useState4[1];\n  var ws = useRef(null);\n  var _useHttp = useHttp(),\n    isLoading = _useHttp.isLoading,\n    isFormSubmission = _useHttp.isFormSubmission,\n    res = _useHttp.res,\n    validation = _useHttp.validation,\n    error = _useHttp.error,\n    urlId = _useHttp.urlId,\n    sendRequest = _useHttp.sendRequest;\n  var _useState5 = useState({}),\n    _useState6 = _slicedToArray(_useState5, 2),\n    inputData = _useState6[0],\n    setInputData = _useState6[1];\n  var classes = useStyles();\n  var _useTranslation = useTranslation(),\n    t = _useTranslation.t;\n  useEffect(function () {\n    ws.current = new WebSocket(\"ws://localhost:8080/chat\");\n    ws.current.onmessage = function (event) {\n      setMessages(function (prev) {\n        return [].concat(_toConsumableArray(prev), [event.data]);\n      });\n    };\n    ws.current.onopen = function () {\n      console.log(\"Connected to WebSocket\");\n    };\n    ws.current.onclose = function () {\n      console.log(\"Disconnected\");\n    };\n    return function () {\n      ws.current.close();\n    };\n  }, []);\n  var sendMessage = function sendMessage() {\n    sendRequest(\"http://localhost:8080/chat\", \"Create\", \"post\", _objectSpread({}, inputData));\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: 20\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }\n  }, \"WebSocket Chat\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      border: \"1px solid gray\",\n      padding: 10,\n      height: 200,\n      overflowY: \"scroll\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }\n  }, messages.map(function (msg, i) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: i,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 43\n      }\n    }, msg);\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    value: input,\n    onChange: function onChange(e) {\n      return setInput(e.target.value);\n    },\n    onKeyDown: function onKeyDown(e) {\n      return e.key === \"Enter\" && sendMessage();\n    },\n    placeholder: \"Type message...\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: sendMessage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, \"Send\"));\n};\nexport default UserPopUpMessage;","map":{"version":3,"names":["React","useEffect","useState","useCallback","useRef","useTranslation","Grid","useStyles","C1Alert","SockJS","C1InputField","useHttp","UserPopUpMessage","messages","setMessages","input","setInput","ws","isLoading","isFormSubmission","res","validation","error","urlId","sendRequest","inputData","setInputData","classes","t","current","WebSocket","onmessage","event","prev","data","onopen","console","log","onclose","close","sendMessage","padding","border","height","overflowY","map","msg","i","e","target","value","key"],"sources":["D:/Collap Projects/ACLEDA-Student/student-ui/src/app/views/applications/messagePopUp/UserPopUpMessage.jsx"],"sourcesContent":["import React, {useEffect, useState, useCallback, useRef} from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { Box, Button, Snackbar, Paper, Typography } from \"@material-ui/core\";\r\nimport { useStyles } from \"../../../c1utils/styles\";\r\nimport C1Alert from \"../../../c1component/C1Alert\";\r\nimport SockJS from \"sockjs-client\";\r\nimport C1InputField from \"../../../c1component/C1InputField\";\r\nimport useHttp from \"../../../c1hooks/http\";\r\n\r\nconst UserPopUpMessage = () => {\r\n    const [messages, setMessages] = useState([]);\r\n    const [input, setInput] = useState(\"\");\r\n    const ws = useRef(null);\r\n    const { isLoading, isFormSubmission, res, validation, error, urlId, sendRequest } = useHttp();\r\n    const [inputData, setInputData] = useState({});\r\n    const classes = useStyles();\r\n    const { t } = useTranslation();\r\n\r\n    useEffect(() => {\r\n        ws.current = new WebSocket(\"ws://localhost:8080/chat\");\r\n\r\n        ws.current.onmessage = (event) => {\r\n            setMessages(prev => [...prev, event.data]);\r\n        };\r\n\r\n        ws.current.onopen = () => {\r\n            console.log(\"Connected to WebSocket\");\r\n        };\r\n\r\n        ws.current.onclose = () => {\r\n            console.log(\"Disconnected\");\r\n        };\r\n\r\n        return () => {\r\n            ws.current.close();\r\n        };\r\n    }, []);\r\n\r\n    const sendMessage = () => {\r\n        sendRequest(`http://localhost:8080/chat`, \"Create\", \"post\", { ...inputData });\r\n    };\r\n\r\n    return (\r\n        <div style={{ padding: 20 }}>\r\n            <h2>WebSocket Chat</h2>\r\n            <div style={{ border: \"1px solid gray\", padding: 10, height: 200, overflowY: \"scroll\" }}>\r\n                {messages.map((msg, i) => <div key={i}>{msg}</div>)}\r\n            </div>\r\n            <input\r\n                value={input}\r\n                onChange={e => setInput(e.target.value)}\r\n                onKeyDown={e => e.key === \"Enter\" && sendMessage()}\r\n                placeholder=\"Type message...\"\r\n            />\r\n            <button onClick={sendMessage}>Send</button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UserPopUpMessage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}